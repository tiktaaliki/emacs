

file:~/.emacs
#+BEGIN_SRC emacs-lisp :tangle yes

#+END_SRC
- evaluation of this emacs lisp code block is disabled.

- delete and reinstall org-plus-contrib
* color 1
:PROPERTIES:
:VISIBILITY: ALL
:END:
** color 2
*** color 3
**** color 4
***** color 5
****** color 7
******* color 8
******** color 9
********* color 10

* to be organized
#+BEGIN_SRC emacs-lisp :tangle yes
   (require 'cl) 
   (setq org-return-follows-link nil)
   (setq org-log-into-drawer t)
   (setq org-enforce-todo-dependencies t)
   (setq org-agenda-use-tag-inheritance nil)
   (setq org-use-tag-inheritance nil)
#+END_SRC

#+RESULTS:

* packages
#+BEGIN_SRC emacs-lisp :tangle yes

 (setq paradox-github-token 'd5d5ad6676a9ba03763251aead84566611c1a290)

#+END_SRC

#+RESULTS:
: d5d5ad6676a9ba03763251aead84566611c1a290

* frame
#+BEGIN_SRC emacs-lisp :tangle yes

(menu-bar-mode -1)
(scroll-bar-mode -1)
#+END_SRC

#+RESULTS:

* text files
#+BEGIN_SRC emacs-lisp :tangle yes

(add-to-list 'auto-mode-alist '("\\.txt$" . org-mode))

#+END_SRC

#+RESULTS:
: ((\.txt$ . org-mode) (\.[pP][dD][fF]\' . pdf-view-mode) (\.odc\' . archive-mode) (\.odf\' . archive-mode) (\.odi\' . archive-mode) (\.otp\' . archive-mode) (\.odp\' . archive-mode) (\.otg\' . archive-mode) (\.odg\' . archive-mode) (\.ots\' . archive-mode) (\.ods\' . archive-mode) (\.odm\' . archive-mode) (\.ott\' . archive-mode) (\.odt\' . archive-mode) (\.[Cc][Ss][Vv]\' . csv-mode) (/git-rebase-todo\' . git-rebase-mode) (\.gpg\(~\|\.~[0-9]+~\)?\' nil epa-file) (\.elc\' . elisp-byte-code-mode) (\.dz\' nil jka-compr) (\.xz\' nil jka-compr) (\.lzma\' nil jka-compr) (\.lz\' nil jka-compr) (\.g?z\' nil jka-compr) (\.bz2\' nil jka-compr) (\.Z\' nil jka-compr) (\.vr[hi]?\' . vera-mode) (\(?:\.\(?:rbw?\|ru\|rake\|thor\|jbuilder\|rabl\|gemspec\|podspec\)\|/\(?:Gem\|Rake\|Cap\|Thor\|Puppet\|Berks\|Vagrant\|Guard\|Pod\)file\)\' . ruby-mode) (\.re?st\' . rst-mode) (\.pyw?\' . python-mode) (\.scss\' . scss-mode) (\.awk\' . awk-mode) (\.\(u?lpc\|pike\|pmod\(\.in\)?\)\' . pike-mode) (\.idl\' . idl-mode) (\.java\' . java-mode) (\.m\' . objc-mode) (\.ii\' . c++-mode) (\.i\' . c-mode) (\.lex\' . c-mode) (\.y\(acc\)?\' . c-mode) (\.[ch]\' . c-mode) (\.\(CC?\|HH?\)\' . c++-mode) (\.[ch]\(pp\|xx\|\+\+\)\' . c++-mode) (\.\(cc\|hh\)\' . c++-mode) (\.\(bat\|cmd\)\' . bat-mode) (\.[sx]?html?\(\.[a-zA-Z_]+\)?\' . html-mode) (\.svgz?\' . image-mode) (\.svgz?\' . xml-mode) (\.x[bp]m\' . image-mode) (\.x[bp]m\' . c-mode) (\.p[bpgn]m\' . image-mode) (\.tiff?\' . image-mode) (\.gif\' . image-mode) (\.png\' . image-mode) (\.jpe?g\' . image-mode) (\.te?xt\' . text-mode) (\.[tT]e[xX]\' . tex-mode) (\.ins\' . tex-mode) (\.ltx\' . latex-mode) (\.dtx\' . doctex-mode) (\.org\' . org-mode) (\.el\' . emacs-lisp-mode) (Project\.ede\' . emacs-lisp-mode) (\.\(scm\|stk\|ss\|sch\)\' . scheme-mode) (\.l\' . lisp-mode) (\.li?sp\' . lisp-mode) (\.[fF]\' . fortran-mode) (\.for\' . fortran-mode) (\.p\' . pascal-mode) (\.pas\' . pascal-mode) (\.\(dpr\|DPR\)\' . delphi-mode) (\.ad[abs]\' . ada-mode) (\.ad[bs].dg\' . ada-mode) (\.\([pP]\([Llm]\|erl\|od\)\|al\)\' . perl-mode) (Imakefile\' . makefile-imake-mode) (Makeppfile\(?:\.mk\)?\' . makefile-makepp-mode) (\.makepp\' . makefile-makepp-mode) (\.mk\' . makefile-gmake-mode) (\.make\' . makefile-gmake-mode) ([Mm]akefile\' . makefile-gmake-mode) (\.am\' . makefile-automake-mode) (\.texinfo\' . texinfo-mode) (\.te?xi\' . texinfo-mode) (\.[sS]\' . asm-mode) (\.asm\' . asm-mode) (\.css\' . css-mode) (\.mixal\' . mixal-mode) (\.gcov\' . compilation-mode) (/\.[a-z0-9-]*gdbinit . gdb-script-mode) (-gdb\.gdb . gdb-script-mode) ([cC]hange\.?[lL]og?\' . change-log-mode) ([cC]hange[lL]og[-.][0-9]+\' . change-log-mode) (\$CHANGE_LOG\$\.TXT . change-log-mode) (\.scm\.[0-9]*\' . scheme-mode) (\.[ckz]?sh\'\|\.shar\'\|/\.z?profile\' . sh-mode) (\.bash\' . sh-mode) (\(/\|\`\)\.\(bash_\(profile\|history\|log\(in\|out\)\)\|z?log\(in\|out\)\)\' . sh-mode) (\(/\|\`\)\.\(shrc\|[kz]shrc\|bashrc\|t?cshrc\|esrc\)\' . sh-mode) (\(/\|\`\)\.\([kz]shenv\|xinitrc\|startxrc\|xsession\)\' . sh-mode) (\.m?spec\' . sh-mode) (\.m[mes]\' . nroff-mode) (\.man\' . nroff-mode) (\.sty\' . latex-mode) (\.cl[so]\' . latex-mode) (\.bbl\' . latex-mode) (\.bib\' . bibtex-mode) (\.bst\' . bibtex-style-mode) (\.sql\' . sql-mode) (\.m[4c]\' . m4-mode) (\.mf\' . metafont-mode) (\.mp\' . metapost-mode) (\.vhdl?\' . vhdl-mode) (\.article\' . text-mode) (\.letter\' . text-mode) (\.i?tcl\' . tcl-mode) (\.exp\' . tcl-mode) (\.itk\' . tcl-mode) (\.icn\' . icon-mode) (\.sim\' . simula-mode) (\.mss\' . scribe-mode) (\.f9[05]\' . f90-mode) (\.f0[38]\' . f90-mode) (\.indent\.pro\' . fundamental-mode) (\.\(pro\|PRO\)\' . idlwave-mode) (\.srt\' . srecode-template-mode) (\.prolog\' . prolog-mode) (\.tar\' . tar-mode) (\.\(arc\|zip\|lzh\|lha\|zoo\|[jew]ar\|xpi\|rar\|7z\|ARC\|ZIP\|LZH\|LHA\|ZOO\|[JEW]AR\|XPI\|RAR\|7Z\)\' . archive-mode) (\.oxt\' . archive-mode) (\.\(deb\|[oi]pk\)\' . archive-mode) (\`/tmp/Re . text-mode) (/Message[0-9]*\' . text-mode) (\`/tmp/fol/ . text-mode) (\.oak\' . scheme-mode) (\.sgml?\' . sgml-mode) (\.x[ms]l\' . xml-mode) (\.dbk\' . xml-mode) (\.dtd\' . sgml-mode) (\.ds\(ss\)?l\' . dsssl-mode) (\.jsm?\' . javascript-mode) (\.json\' . javascript-mode) (\.[ds]?vh?\' . verilog-mode) (\.by\' . bovine-grammar-mode) (\.wy\' . wisent-grammar-mode) ([:/\]\..*\(emacs\|gnus\|viper\)\' . emacs-lisp-mode) (\`\..*emacs\' . emacs-lisp-mode) ([:/]_emacs\' . emacs-lisp-mode) (/crontab\.X*[0-9]+\' . shell-script-mode) (\.ml\' . lisp-mode) (\.ld[si]?\' . ld-script-mode) (ld\.?script\' . ld-script-mode) (\.xs\' . c-mode) (\.x[abdsru]?[cnw]?\' . ld-script-mode) (\.zone\' . dns-mode) (\.soa\' . dns-mode) (\.asd\' . lisp-mode) (\.\(asn\|mib\|smi\)\' . snmp-mode) (\.\(as\|mi\|sm\)2\' . snmpv2-mode) (\.\(diffs?\|patch\|rej\)\' . diff-mode) (\.\(dif\|pat\)\' . diff-mode) (\.[eE]?[pP][sS]\' . ps-mode) (\.\(?:PDF\|DVI\|OD[FGPST]\|DOCX?\|XLSX?\|PPTX?\|pdf\|djvu\|dvi\|od[fgpst]\|docx?\|xlsx?\|pptx?\)\' . doc-view-mode-maybe) (configure\.\(ac\|in\)\' . autoconf-mode) (\.s\(v\|iv\|ieve\)\' . sieve-mode) (BROWSE\' . ebrowse-tree-mode) (\.ebrowse\' . ebrowse-tree-mode) (#\*mail\* . mail-mode) (\.g\' . antlr-mode) (\.mod\' . m2-mode) (\.ses\' . ses-mode) (\.docbook\' . sgml-mode) (\.com\' . dcl-mode) (/config\.\(?:bat\|log\)\' . fundamental-mode) (\.\(?:[iI][nN][iI]\|[lL][sS][tT]\|[rR][eE][gG]\|[sS][yY][sS]\)\' . conf-mode) (\.\(?:desktop\|la\)\' . conf-unix-mode) (\.ppd\' . conf-ppd-mode) (java.+\.conf\' . conf-javaprop-mode) (\.properties\(?:\.[a-zA-Z0-9._-]+\)?\' . conf-javaprop-mode) (\`/etc/\(?:DIR_COLORS\|ethers\|.?fstab\|.*hosts\|lesskey\|login\.?de\(?:fs\|vperm\)\|magic\|mtab\|pam\.d/.*\|permissions\(?:\.d/.+\)?\|protocols\|rpc\|services\)\' . conf-space-mode) (\`/etc/\(?:acpid?/.+\|aliases\(?:\.d/.+\)?\|default/.+\|group-?\|hosts\..+\|inittab\|ksysguarddrc\|opera6rc\|passwd-?\|shadow-?\|sysconfig/.+\)\' . conf-mode) ([cC]hange[lL]og[-.][-0-9a-z]+\' . change-log-mode) (/\.?\(?:gitconfig\|gnokiirc\|hgrc\|kde.*rc\|mime\.types\|wgetrc\)\' . conf-mode) (/\.\(?:enigma\|gltron\|gtk\|hxplayer\|net\|neverball\|qt/.+\|realplayer\|scummvm\|sversion\|sylpheed/.+\|xmp\)rc\' . conf-mode) (/\.\(?:gdbtkinit\|grip\|orbital/.+txt\|rhosts\|tuxracer/options\)\' . conf-mode) (/\.?X\(?:default\|resource\|re\)s\> . conf-xdefaults-mode) (/X11.+app-defaults/\|\.ad\' . conf-xdefaults-mode) (/X11.+locale/.+/Compose\' . conf-colon-mode) (/X11.+locale/compose\.dir\' . conf-javaprop-mode) (\.~?[0-9]+\.[0-9][-.0-9]*~?\' nil t) (\.\(?:orig\|in\|[bB][aA][kK]\)\' nil t) ([/.]c\(?:on\)?f\(?:i?g\)?\(?:\.[a-zA-Z0-9._-]+\)?\' . conf-mode-maybe) (\.[1-9]\' . nroff-mode) (\.tgz\' . tar-mode) (\.tbz2?\' . tar-mode) (\.txz\' . tar-mode))

* csv 
#+BEGIN_SRC emacs-lisp :tangle yes

(setq csv-separators '(":" "	"))

#+END_SRC

#+RESULTS:
| : |   |

* unfill paragraph
#+BEGIN_SRC emacs-lisp :tangle yes

;;; Stefan Monnier <foo at acm.org>. It is the opposite of fill-paragraph    
    (defun unfill-paragraph (&optional region)
      "Takes a multi-line paragraph and makes it into a single line of text."
      (interactive (progn (barf-if-buffer-read-only) '(t)))
      (let ((fill-column (point-max))
            ;; This would override `fill-column' if it's an integer.
            (emacs-lisp-docstring-fill-column t))
        (fill-paragraph nil region)))

#+END_SRC

#+RESULTS:
: unfill-paragraph

* Key bindings
#+BEGIN_SRC emacs-lisp :tangle yes

   (global-unset-key (kbd "C-z"))
   (global-set-key (kbd "C-x /") 'shrink-window-horizontally)
   (global-set-key (kbd "<f2>") 'org-clock-in)
   (global-set-key (kbd "<f7>") 'org-agenda)
   (global-set-key (kbd "C-c a") 'org-agenda)
   (global-set-key (kbd "C-x .") 'org-archive-subtree-default)
   (global-set-key (kbd "C-.") 'org-todo)
   (global-set-key (kbd "C-c n") 'org-schedule)
   (global-set-key (kbd "<f1>") 'org-capture)

   (global-set-key (kbd "M-=") 'count-words)
   (global-set-key (kbd "<f5>") 'repeat)
   (global-set-key (kbd "C-<kp-6>") 'xah-select-block)
                                           ;(global-set-key (kbd "M-1") 'org-clock-select-task)
   (global-set-key (kbd "M-_") 'insert-pair)
   (global-set-key (kbd "M-*") 'insert-pair)
   (global-set-key (kbd "M-\/") 'insert-pair)

   (bind-keys ("C-+" . text-scale-increase)
              ("C--" . text-scale-decrease)
              ("C-c l" . org-store-link)
              ([f6] . helm-bibtex-with-local-bibliography)
              )

   (global-set-key (kbd "C-c <f2>") #'my-org-clock-select-task)



   (define-key key-translation-map (kbd "C-c <up>") (kbd "🡑"))
   (define-key key-translation-map (kbd "C-c <down>") (kbd "🡓"))
   (define-key key-translation-map (kbd "C-c =") (kbd "≠"))
   (define-key key-translation-map (kbd "C-c <right>") (kbd "→"))
   ;;en-dash
   (define-key key-translation-map (kbd "C--") (kbd "–"))

   (define-key key-translation-map (kbd "C-c '") (kbd "'"))
   ;;em dash
   (define-key key-translation-map (kbd "C-c m") (kbd "—"))
   (define-key key-translation-map (kbd "C-c d") (kbd "Δ"))
   (define-key key-translation-map (kbd "C-c C-<right>")  (kbd "⟹"))
   (define-key key-translation-map (kbd "C-c z")  (kbd "∴"))




#+END_SRC

#+RESULTS:
: [8756]

* org-babel
#+BEGIN_SRC emacs-lisp :tangle yes

(setq org-babel-load-languages '((emacs-lisp . t)
  (css . t)))

#+END_SRC

#+RESULTS:
: ((emacs-lisp . t) (css . t))

* templates
#+BEGIN_SRC emacs-lisp :tangle yes

   (add-to-list 'org-structure-template-alist '
                ("r" "- [ ] downloaded\n- [ ] added to bibtex file\n- [ ] read\n- [ ] notes"))

   (add-to-list 'org-structure-template-alist '
                ("736" "- [ ] downloaded\n- [ ] added to bibtex file\n-[ ] writing prompt\n- [ ] read\n- [ ] notes\n- [ ] post reflection\n- [ ] respond to 3 posts"))

   (add-to-list 'org-structure-template-alist '
                ("b" "[/]"))

   (add-to-list 'org-structure-template-alist '
                ("s"  "#+BEGIN_SRC emacs-lisp :tangle yes\n\n?\n\n#+END_SRC"))

   (add-to-list 'org-structure-template-alist (list "p" (concat ":PROPERTIES:\n" "?\n" ":END:"))) 
#+END_SRC

#+RESULTS:
| s | #+BEGIN_SRC emacs-lisp :tangle yes |



'(("eh" ":EXPORT_FILE_NAME: ?\n:EXPORT_TITLE:\n:EXPORT_OPTIONS: toc:nil html-postamble:nil num:nil")
  ("p" ":PROPERTIES:\n?\n:END:")
  ("r" "- [ ] downloaded\n\n- [ ] added to bibtex file\n- [ ] read\n- [ ] notes")
  ("s" "#+BEGIN_SRC ?\n\n#+END_SRC")
  ("e" "#+BEGIN_EXAMPLE\n?\n#+END_EXAMPLE")
  ("q" "#+BEGIN_QUOTE\n?\n#+END_QUOTE")
  ("v" "#+BEGIN_VERSE\n?\n#+END_VERSE")
  ("V" "#+BEGIN_VERBATIM\n?\n#+END_VERBATIM")
  ("c" "#+BEGIN_CENTER\n?\n#+END_CENTER")
  ("C" "#+BEGIN_COMMENT\n?\n#+END_COMMENT")
  ("l" "#+BEGIN_EXPORT latex\n?\n#+END_EXPORT")
  ("L" "#+LaTeX: ")
  ("h" "#+BEGIN_EXPORT html\n?\n#+END_EXPORT")
  ("H" "#+HTML: ")
  ("a" "#+BEGIN_EXPORT ascii\n?\n#+END_EXPORT")
  ("A" "#+ASCII: ")
  ("i" "#+INDEX: ?")
  ("I" "#+INCLUDE: %file ?"))
#+RESULTS:
| eh | :EXPORT_FILE_NAME: ? |

* openwith
#+BEGIN_SRC emacs-lisp :tangle yes
(use-package openwith
  :config (progn
            (when (require 'openwith nil 'noerror)
              (setq openwith-associations
                    (list
                     ;; (list (openwith-make-extension-regexp
                     ;;        '("mpg" "mpeg" "mp3" "mp4"
                     ;;          "avi" "wmv" "wav" "mov" "flv"
                     ;;          "ogm" "ogg" "mkv"))
                     ;;       "audacious"
                     ;;       '(file))
                     ;; (list (openwith-make-extension-regexp
                     ;;        '("xbm" "pbm" "pgm" "ppm" "pnm"
                     ;;          "png" "bmp" "tif" "jpeg" "jpg"))
                     ;;       "gpicview"
                     ;;       '(file))
                    ;; (list (openwith-make-extension-regexp
                      ;;      '("pdf"))
                        ;;   "zathura"
                          ;; '(file))
                     (list (openwith-make-extension-regexp
                            '("doc" "docx"))
                           "wps"
                           '(file))
                     ))
              (openwith-mode 1)))
:ensure t)

#+END_SRC

#+RESULTS:
: t

   (require 'openwith)
   (openwith-mode t)

* browsing the web
#+BEGIN_SRC emacs-lisp :tangle yes

(setq browse-url-browser-function 'browse-url-default-browser)

#+END_SRC

#+RESULTS:
: browse-url-default-browser


* bibtex citations



#+BEGIN_SRC emacs-lisp :tangle yes
   (setq org-ref-formatted-citation-formats: 
   '(("text"
     ("article" . "${author}. (${year}). ${title}. /${journal}/, ${volume}/(${number})/, ${pages}. ${doi}")
   
      ("book" . "${author}. (${year}). /${title}/. ${address}: ${publisher}.")
      (nil . "${author} [${username}]. (${year}). ${title}. [${type}].Retrieved from ${url} "))
     ("org"
        ("article" . "${author}. (${year}). ${title}. /${journal}/, ${volume}/(${number})/, ${pages}. ${doi}")
      ("inproceedings" . "${author}, /${title}/, In ${editor}, ${booktitle} (pp. ${pages}) (${year}). ${address}: ${publisher}.")
      ("book" . "${author}. (${year}). /${title}/. ${address}: ${publisher}.")
      ("phdthesis" . "${author}, /${title}/ (Doctoral dissertation) (${year}). ${school}, ${address}.")
      ("inbook" . "${author}, /${title}/, In ${editor} (Eds.), ${booktitle} (pp. ${pages}) (${year}). ${address}: ${publisher}.")
      ("incollection" . "${author}, /${title}/, In ${editor} (Eds.), ${booktitle} (pp. ${pages}) (${year}). ${address}: ${publisher}.")
      ("proceedings" . "${editor} (Eds.), _${booktitle}_ (${year}). ${address}: ${publisher}.")
      ("unpublished" . "${author}, /${title}/ (${year}). Unpublished manuscript.")
  ("online" . "${author}. [${username}]. (${year}). /${title}/ [${type}]. Retrieved from ${url}")
      (nil . "${author} [${username}]. (${year}). ${title}. [${type}].Retrieved from ${url} "))
))

          



         (setq bibtex-BibTeX-entry-alist 
         '(("Article" "Article in Journal"
            (("author")
             ("title" "Title of the article (BibTeX converts it to lowercase)"))
            (("journal")
             ("year"))
            (("volume" "Volume of the journal")
             ("number" "Number of the journal (only allowed if entry contains volume)")
             ("pages" "Pages in the journal")
             ("month")
             ("note")))
           ("InProceedings" "Article in Conference Proceedings"
            (("author")
             ("title" "Title of the article in proceedings (BibTeX converts it to lowercase)"))
            (("booktitle" "Name of the conference proceedings")
             ("year"))
            (("editor")
             ("volume" "Volume of the conference proceedings in the series")
             ("number" "Number of the conference proceedings in a small series (overwritten by volume)")
             ("series" "Series in which the conference proceedings appeared")
             ("pages" "Pages in the conference proceedings")
             ("month")
             ("address")
             ("organization" "Sponsoring organization of the conference")
             ("publisher" "Publishing company, its location")
             ("note")))
           ("InCollection" "Article in a Collection"
            (("author")
             ("title" "Title of the article in book (BibTeX converts it to lowercase)")
             ("booktitle" "Name of the book"))
            (("publisher")
             ("year"))
            (("editor")
             ("volume" "Volume of the book in the series")
             ("number" "Number of the book in a small series (overwritten by volume)")
             ("series" "Series in which the book appeared")
             ("type" "Word to use instead of \"chapter\"")
             ("chapter" "Chapter in the book")
             ("pages" "Pages in the book")
             ("edition" "Edition of the book as a capitalized English word")
             ("month")
             ("address")
             ("note")))
           ("InBook" "Chapter or Pages in a Book"
            (("author" nil nil 0)
             ("editor" nil nil 0)
             ("title" "Title of the book")
             ("chapter" "Chapter in the book"))
            (("publisher")
             ("year"))
            (("volume" "Volume of the book in the series")
             ("number" "Number of the book in a small series (overwritten by volume)")
             ("series" "Series in which the book appeared")
             ("type" "Word to use instead of \"chapter\"")
             ("address")
             ("edition" "Edition of the book as a capitalized English word")
             ("month")
             ("pages" "Pages in the book")
             ("note")))
           ("Proceedings" "Conference Proceedings"
            (("title" "Title of the conference proceedings")
             ("year"))
            nil
            (("booktitle" "Title of the proceedings for cross references")
             ("editor")
             ("volume" "Volume of the conference proceedings in the series")
             ("number" "Number of the conference proceedings in a small series (overwritten by volume)")
             ("series" "Series in which the conference proceedings appeared")
             ("address")
             ("month")
             ("organization" "Sponsoring organization of the conference")
             ("publisher" "Publishing company, its location")
             ("note")))
           ("Book" "Book"
            (("author" nil nil 0)
             ("editor" nil nil 0)
             ("title" "Title of the book"))
            (("publisher")
             ("year"))
            (("volume" "Volume of the book in the series")
             ("number" "Number of the book in a small series (overwritten by volume)")
             ("series" "Series in which the book appeared")
             ("address")
             ("edition" "Edition of the book as a capitalized English word")
             ("month")
             ("note")))
           ("Booklet" "Booklet (Bound, but no Publisher)"
            (("title" "Title of the booklet (BibTeX converts it to lowercase)"))
            nil
            (("author")
             ("howpublished" "The way in which the booklet was published")
             ("address")
             ("month")
             ("year")
             ("note")))
           ("PhdThesis" "PhD. Thesis"
            (("author")
             ("title" "Title of the PhD. thesis")
             ("school" "School where the PhD. thesis was written")
             ("year"))
            nil
            (("type" "Type of the PhD. thesis")
             ("address" "Address of the school (if not part of field \"school\") or country")
             ("month")
             ("note")))
           ("MastersThesis" "Master's Thesis"
            (("author")
             ("title" "Title of the master's thesis (BibTeX converts it to lowercase)")
             ("school" "School where the master's thesis was written")
             ("year"))
            nil
            (("type" "Type of the master's thesis (if other than \"Master's thesis\")")
             ("address" "Address of the school (if not part of field \"school\") or country")
             ("month")
             ("note")))
           ("TechReport" "Technical Report"
            (("author")
             ("title" "Title of the technical report (BibTeX converts it to lowercase)")
             ("institution" "Sponsoring institution of the report")
             ("year"))
            nil
            (("type" "Type of the report (if other than \"technical report\")")
             ("number" "Number of the technical report")
             ("address")
             ("month")
             ("note")))
           ("Manual" "Technical Manual"
            (("title" "Title of the manual"))
            nil
            (("author")
             ("organization" "Publishing organization of the manual")
             ("address")
             ("edition" "Edition of the manual as a capitalized English word")
             ("month")
             ("year")
             ("note")))
           ("Unpublished" "Unpublished"
            (("author")
             ("title" "Title of the unpublished work (BibTeX converts it to lowercase)")
             ("note"))
            nil
            (("month")
             ("year")))
           ("Online" "Online"
            (("author")
             ("username")
             ("title" "Title of the unpublished work (BibTeX converts it to lowercase)")
             ("url")
             ("type")
             ("note"))
            nil
            (("month")
             ("year")))

           ("Misc" "Miscellaneous" nil nil
            (("author")
             ("title" "Title of the work (BibTeX converts it to lowercase)")
             ("howpublished" "The way in which the work was published")
             ("month")
             ("year")
             ("note")))))
#+END_SRC

#+RESULTS:
| Article       | Article in Journal                | ((author) (title Title of the article (BibTeX converts it to lowercase)))                                                                      | ((journal) (year))                                      | ((volume Volume of the journal) (number Number of the journal (only allowed if entry contains volume)) (pages Pages in the journal) (month) (note))                                                                                                                                                                                                                                                                  |
| InProceedings | Article in Conference Proceedings | ((author) (title Title of the article in proceedings (BibTeX converts it to lowercase)))                                                       | ((booktitle Name of the conference proceedings) (year)) | ((editor) (volume Volume of the conference proceedings in the series) (number Number of the conference proceedings in a small series (overwritten by volume)) (series Series in which the conference proceedings appeared) (pages Pages in the conference proceedings) (month) (address) (organization Sponsoring organization of the conference) (publisher Publishing company, its location) (note))               |
| InCollection  | Article in a Collection           | ((author) (title Title of the article in book (BibTeX converts it to lowercase)) (booktitle Name of the book))                                 | ((publisher) (year))                                    | ((editor) (volume Volume of the book in the series) (number Number of the book in a small series (overwritten by volume)) (series Series in which the book appeared) (type Word to use instead of "chapter") (chapter Chapter in the book) (pages Pages in the book) (edition Edition of the book as a capitalized English word) (month) (address) (note))                                                           |
| InBook        | Chapter or Pages in a Book        | ((author nil nil 0) (editor nil nil 0) (title Title of the book) (chapter Chapter in the book))                                                | ((publisher) (year))                                    | ((volume Volume of the book in the series) (number Number of the book in a small series (overwritten by volume)) (series Series in which the book appeared) (type Word to use instead of "chapter") (address) (edition Edition of the book as a capitalized English word) (month) (pages Pages in the book) (note))                                                                                                  |
| Proceedings   | Conference Proceedings            | ((title Title of the conference proceedings) (year))                                                                                           | nil                                                     | ((booktitle Title of the proceedings for cross references) (editor) (volume Volume of the conference proceedings in the series) (number Number of the conference proceedings in a small series (overwritten by volume)) (series Series in which the conference proceedings appeared) (address) (month) (organization Sponsoring organization of the conference) (publisher Publishing company, its location) (note)) |
| Book          | Book                              | ((author nil nil 0) (editor nil nil 0) (title Title of the book))                                                                              | ((publisher) (year))                                    | ((volume Volume of the book in the series) (number Number of the book in a small series (overwritten by volume)) (series Series in which the book appeared) (address) (edition Edition of the book as a capitalized English word) (month) (note))                                                                                                                                                                    |
| Booklet       | Booklet (Bound, but no Publisher) | ((title Title of the booklet (BibTeX converts it to lowercase)))                                                                               | nil                                                     | ((author) (howpublished The way in which the booklet was published) (address) (month) (year) (note))                                                                                                                                                                                                                                                                                                                 |
| PhdThesis     | PhD. Thesis                       | ((author) (title Title of the PhD. thesis) (school School where the PhD. thesis was written) (year))                                           | nil                                                     | ((type Type of the PhD. thesis) (address Address of the school (if not part of field "school") or country) (month) (note))                                                                                                                                                                                                                                                                                           |
| MastersThesis | Master's Thesis                   | ((author) (title Title of the master's thesis (BibTeX converts it to lowercase)) (school School where the master's thesis was written) (year)) | nil                                                     | ((type Type of the master's thesis (if other than "Master's thesis")) (address Address of the school (if not part of field "school") or country) (month) (note))                                                                                                                                                                                                                                                     |
| TechReport    | Technical Report                  | ((author) (title Title of the technical report (BibTeX converts it to lowercase)) (institution Sponsoring institution of the report) (year))   | nil                                                     | ((type Type of the report (if other than "technical report")) (number Number of the technical report) (address) (month) (note))                                                                                                                                                                                                                                                                                      |
| Manual        | Technical Manual                  | ((title Title of the manual))                                                                                                                  | nil                                                     | ((author) (organization Publishing organization of the manual) (address) (edition Edition of the manual as a capitalized English word) (month) (year) (note))                                                                                                                                                                                                                                                        |
| Unpublished   | Unpublished                       | ((author) (title Title of the unpublished work (BibTeX converts it to lowercase)) (note))                                                      | nil                                                     | ((month) (year))                                                                                                                                                                                                                                                                                                                                                                                                     |
| Online        | Online                            | ((author) (username) (title Title of the unpublished work (BibTeX converts it to lowercase)) (url) (type) (note))                              | nil                                                     | ((month) (year))                                                                                                                                                                                                                                                                                                                                                                                                     |
| Misc          | Miscellaneous                     | nil                                                                                                                                            | nil                                                     | ((author) (title Title of the work (BibTeX converts it to lowercase)) (howpublished The way in which the work was published) (month) (year) (note))                                                                                                                                                                                                                                                                  |

* formatting
** text formatting
#+BEGIN_SRC emacs-lisp :tangle yes

   (setq sentence-end-double-space nil)

   (use-package smartparens
     :init
     (show-smartparens-global-mode 1))
   (smartparens-global-mode 1)
   (setq show-paren-style 'expression)


   (setq blink-matching-paren-dont-ignore-comments nil)

(require 'smart-quotes) 


(add-to-list 'insert-pair-alist (list ?\* ?\*))
   (add-to-list 'insert-pair-alist (list ?\_ ?\_))
   (add-to-list 'insert-pair-alist (list ?\/ ?\/))
;   (add-to-list 'insert-pair-alist (list ?\" ?\"))
  

#+END_SRC

#+RESULTS:
|  47 |  47 |
|  95 |  95 |
|  42 |  42 |
|  40 |  41 |
|  91 |  93 |
| 123 | 125 |
|  60 |  62 |
|  34 |  34 |
|  39 |  39 |
|  96 |  39 |
*** smart quotes

** GUI formatting
#+BEGIN_SRC emacs-lisp :tangle yes
(set-fringe-mode '(50 . 0))
(setq org-startup-indented t)
(setq org-hide-emphasis-markers t)
(setq org-hide-leading-stars t) 
(use-package darkokai-theme
 :ensure t
 :config (load-theme 'darkokai t))
(setq org-startup-with-inline-images t)

(setq org-startup-align-all-tables t)
 (setq org-startup-folded t)

#+END_SRC

#+RESULTS:
: t

(setq custom-safe-themes (quote
   ("365d9553de0e0d658af60cff7b8f891ca185a2d7ba3fc6d29aadba69f5194c7f" "10e231624707d46f7b2059cc9280c332f7c7a530ebc17dba7e506df34c5332c4" default)))


* navigating
#+BEGIN_SRC emacs-lisp :tangle yes
   (use-package ido)
   (ido-mode t)
   (use-package deft
     :bind ("<f8>" . deft)
     :ensure t)

 (setq deft-directory "~/Dropbox/Zettelkasten/")
 (setq deft-default-extension "org")

 (setq deft-use-filename-as-title t)
 (setq deft-text-mode 'org-mode)
 (setq deft-file-naming-rules '((noslash . "-")
                                (nospace . "-")
                                (case-fn . downcase))) 
 (setq deft-recursive t)
 (setq deft-extensions '("org" "txt" "emacs" "bib"))

(setq deft-auto-save-interval 1.0)
(add-hook 'after-init-hook 'deft)


   (use-package helm
     :config (
              helm-mode 1)
     :bind (("M-x" . helm-M-x)
            ([f3]  . helm-buffers-list)))

   (fset 'yes-or-no-p 'y-or-n-p)

  
   (winner-mode 1)
   (use-package projectile)
   (use-package helm-projectile)
                                           ;(projectile-mode)

#+END_SRC

#+RESULTS:


# * Emacs functionality
* org noter
#+BEGIN_SRC emacs-lisp :tangle yes
   (use-package org-noter
     :ensure t
     :config (setq org-noter-property-doc-file "INTERLEAVE_PDF")
     (setq org-noter-property-note-location "INTERLEAVE_PAGE_NOTE") 
     (setq org-noter-notes-window-location 'other-frame)
     (setq org-noter-default-heading-title "p. $p$") 
     (setq org-noter-auto-save-last-location t))

(use-package interleave)


#+END_SRC

#+RESULTS:

* org-gcal
   
#+BEGIN_SRC emacs-lisp :tangle yes

(use-package calfw)
(use-package calfw-org)
(use-package calfw-gcal)

(setq package-check-signature nil)
(setq org-gcal-down-days '120)
;for http400 error, open scratch and evaluate (org-gcal-request-token) using C-x C-e

#+END_SRC

#+RESULTS:
: 120

* org-agenda
** agenda files                              

#+BEGIN_SRC emacs-lisp :tangle yes
   (setq org-agenda-files (quote
                           ("~/Dropbox/Zettelkasten/inbox.org" 
                            "~/Dropbox/Zettelkasten/lis.org"  
                            "~/Dropbox/Zettelkasten/ndd.org"
                            "~/Dropbox/Zettelkasten/gcal.org" 
                            "~/Dropbox/Zettelkasten/journal.org"
                            "~/Dropbox/Zettelkasten/work.org"
                            "~/Dropbox/Zettelkasten/budget.org"
                            "~/Dropbox/Zettelkasten/notes.org")))


#+END_SRC

** inside the main agenda view
#+BEGIN_SRC emacs-lisp :tangle yes
      (setq org-agenda-current-time-string "✸✸✸✸✸✸ NOW ✸✸✸✸✸✸✸✸✸✸")
      (setq org-agenda-entry-text-leaders: "   . ")

      (setq org-agenda-entry-text-maxlines 1)
      (setq org-agenda-deadline-leaders: '("DUE:" "In %3d d.:" "%2d d. ago:"))
      (setq org-agenda-scheduled-leaders '("" "%2dx past due: "))
      (setq org-agenda-span (quote 8))

      (setq org-agenda-export-html-style nil)
                                              ;skips
      (setq org-agenda-skip-timestamp-if-deadline-is-shown t)
      (setq org-agenda-skip-deadline-if-done t)
      (setq org-agenda-skip-additional-timestamps-same-entry t)
      (setq org-agenda-todo-ignore-deadlines nil)

      (setq org-agenda-skip-deadline-prewarning-if-scheduled t)
      (setq org-agenda-skip-scheduled-if-done t)
      (setq org-agenda-jump-prefer-future t)
      (setq org-agenda-start-with-clockreport-mode t)

                                              ; (setq org-agenda-window-setup (quote other-frame))
      (setq org-deadline-warning-days 4)
      (setq org-agenda-with-colors t)
   (setq org-log-done 'note)
#+END_SRC

#+RESULTS:
: note

** custom agenda views
#+BEGIN_SRC emacs-lisp :tangle yes

            org-agenda-custom-commands '(("n" "Agenda and all TODOs" ((agenda "")     (alltodo ""))))

            (setq org-agenda-custom-commands 
                  '(("s" todo "NEXT|◔")
                    ("d" "Undated tasks " alltodo ""              ((org-agenda-todo-ignore-with-date t))
             )))

            (setq org-stuck-projects '("/PROJECT" ("NEXT") nil ""))
 (setq org-log-note-clock-out t)
#+END_SRC

#+RESULTS:
: t



'("+LEVEL=2/-DONE"
  ("TODO" "NEXT" "NEXTACTION")
  nil "")


 (setq org-agenda-custom-commands 

           '(("d" "Undated tasks" alltodo "" 
             ((org-agenda-todo-ignore-with-date t))
             ((org-agenda-max-entries 5))))
      )

(setq org-agenda-custom-commands
      '(("x" agenda)
        ("y" agenda*)
        ("w" todo "WAITING")
        ("W" todo-tree "WAITING")
        ("u" tags "+boss-urgent")
        ("v" tags-todo "+boss-urgent")
        ("U" tags-tree "+boss-urgent")
        ("f" occur-tree "\\<FIXME\\>")
        ("h" . "HOME+Name tags searches") ; description for "h" prefix
        ("hl" tags "+home+Lisa")
        ("hp" tags "+home+Peter")
        ("hk" tags "+home+Kim")))
** todo keywords 
              ;(setq org-agenda-dim-blocked-tasks t)
#+BEGIN_SRC emacs-lisp :tangle yes


   (setq org-todo-keywords '((sequence  "TODO(t!)" "NEXT(n!)" "|" "✓(d!)")
                             (sequence "습관(h!)" "PROJECT(p!)""◔(s!)" "?(w!)" "|" "☓(c!)")))

   (setq org-todo-keyword-faces '(("습관" :foreground "dodger blue")
                                  ("PROJECT" :foreground "chartreuse" :weight bold  )
                                  ("NEXT" :foreground "blue2" :background "white" :weight bold :family "fira mono")

                                  ("◔" :foreground "magenta1")
                                  ("?" :foreground "yellow") 
                                  ("✓" :foreground "gainsboro" )
                                  ("☓" :foreground "gainsboro")))



#+END_SRC

#+RESULTS:
| 습관    | :foreground | dodger blue |             |       |         |      |         |           |
| PROJECT | :foreground | chartreuse  | :weight     | bold  |         |      |         |           |
| NEXT    | :foreground | blue2       | :background | white | :weight | bold | :family | fira mono |
| ◔       | :foreground | magenta1    |             |       |         |      |         |           |
| ?       | :foreground | yellow      |             |       |         |      |         |           |
| ✓       | :foreground | gainsboro   |             |       |         |      |         |           |
| ☓       | :foreground | gainsboro   |             |       |         |      |         |           |


  (setq org-todo-state-tags-triggers'(
        ("PROJECT"   ("project" . t))
		       ("TODO" ("todo" . t))))

* org-plus-contrib
#+BEGIN_SRC emacs-lisp :tangle yes



#+END_SRC
* org-ref

#+BEGIN_SRC emacs-lisp :tangle yes

(use-package org-ref)
(setq reftex-default-bibliography '("~/Dropbox/Zettelkasten/references.bib"))

;; see org-ref for use of these variables
(setq org-ref-bibliography-notes "~/Dropbox/Zettelkasten/notes.org"
      org-ref-default-bibliography '("~/Dropbox/Zettelkasten/references.bib")
      org-ref-pdf-directory "~/Dropbox/Zettelkasten/PDFs/")

(setq bibtex-completion-bibliography "~/Dropbox/Zettelkasten/references.bib"
      bibtex-completion-library-path "~/Dropbox/Zettelkasten/PDFs"
      bibtex-completion-notes-path "~/Dropbox/Zettelkasten/notes.org")

;; open pdf with system pdf viewer (works on mac)
(setq bibtex-completion-pdf-open-function
  (lambda (fpath)
    (start-process "open" "*open*" "open" fpath)))


(setq pdf-view-continuous nil)

#+END_SRC

#+RESULTS:



* text selection
#+BEGIN_SRC emacs-lisp :tangle yes
   (setq org-support-shift-select (quote always))

   (delete-selection-mode) ;allows to delete selected text by typing

   (defun xah-select-current-block ()
     "Select the current block of text between blank lines.

     URL `http://ergoemacs.org/emacs/modernization_mark-word.html'
     Version 2016-07-22"
     (interactive)
     (let (-p1)
       (progn
         (if (re-search-backward "\n[ \t]*\n" nil "move")
             (progn (re-search-forward "\n[ \t]*\n")
                    (setq -p1 (point)))
           (setq -p1 (point)))
         (re-search-forward "\n[ \t]*\n" nil "move"))
       (set-mark -p1)))

   (defun xah-select-block ()
     "Select the current/next block of text between blank lines.
     If region is active, extend selection downward by block.

     URL `http://ergoemacs.org/emacs/modernization_mark-word.html'
     Version 2016-07-22"
     (interactive)
     (if (region-active-p)
         (re-search-forward "\n[ \t]*\n" nil "move")
       (xah-select-current-block)))



#+END_SRC

#+RESULTS:
: xah-select-block

* text navigating
#+BEGIN_SRC emacs-lisp :tangle yes

   (setq org-src-tab-acts-natively t)

#+END_SRC
* text editing
#+BEGIN_SRC emacs-lisp :tangle yes

         (use-package company
           :ensure t
           :init (global-company-mode)
           :config (company-mode 1)
           )





   ;;       (use-package ispell
   ;;         :config (setq ispell-program-name "aspell")

   ;;    )


   ;; (add-to-list 'exec-path "C:/Program Files (x86)/Aspell/bin/")
         (use-package flyspell-correct-helm )

 

#+END_SRC

#+RESULTS:
* writing environment
#+BEGIN_SRC emacs-lisp :tangle yes

   (use-package writeroom-mode)
   (setq writeroom-extra-line-spacing 2)
   (setq writeroom-restore-window-config t)
   (setq writeroom-major-modes '(text-mode org-mode))
(setq writeroom-fullscreen-effect 'maximized)
                                           ;  global-writeroom-mode t







   (use-package olivetti)
#+END_SRC

#+RESULTS:

* auctex
#+BEGIN_SRC emacs-lisp :tangle yes

(setq TeX-auto-save t)
(setq TeX-parse-self t)



#+END_SRC

#+RESULTS:

* ORG
** org-toc: table of contents

#+BEGIN_SRC emacs-lisp :tangle yes

(use-package toc-org)
;; (if (require 'toc-org nil t)
;;     (add-hook 'org-mode-hook 'toc-org-enable)
;;     (warn "toc-org not found"))
#+END_SRC
** org-clock
#+BEGIN_SRC emacs-lisp :tangle yes
;; Resume clocking task when emacs is restarted
(org-clock-persistence-insinuate)
;; Show lot of clocking history so it's easy to pick items off the C-F11 list
(setq org-clock-history-length 30)
;; Resume clocking task on clock-in if the clock is open
;(setq org-clock-in-resume nil)

;; Separate drawers for clocking and logs
(setq org-drawers (quote ("PROPERTIES" "LOGBOOK")))
;; Save clock data and state changes and notes in the LOGBOOK drawer
(setq org-clock-persist-file "~/Dropbox/emacs/.emacs.d/org-clock-save.el")
(setq org-clock-into-drawer t)
;; Sometimes I change tasks I'm clocking quickly - this removes clocked tasks with 0:00 duration

; C-u C-c C-x C-i d
(setq org-clock-out-remove-zero-time-clocks t)
;; Clock out when moving task to a done state
(setq org-clock-out-when-done t)
;; Save the running clock and all clock history when exiting Emacs, load it on startup
(setq org-clock-persist t)
;; Do not prompt to resume an active clock
(setq org-clock-persist-query-resume nil)
;; Enable auto clock resolution for finding open clocks
(setq org-clock-auto-clock-resolution (quote when-no-clock-is-running))
;; Include current clocking task in clock reports
(setq org-clock-report-include-clocking-task t)
(setq org-clock-mode-line-total (quote current))

(setq org-clock-clocked-in-display (quote both))

(setq org-clock-clocktable-default-properties '(:scope ("inbox.org" "lis.org" "ndd.org" "work.org" "budget.org" "journal.org" "notes.org")  :maxlevel 4 :link t :emphasize t :fileskip0 t :block today :narrow 30 :tcolumns 1 ))


(defun my-org-clock-select-task ()
  (interactive)
  (org-clock-select-task))



#+END_SRC

#+RESULTS:
: my-org-clock-select-task

(setq org-clock-clocktable-default-properties '(:maxlevel 2 :scope ("lis.org" "inbox.org" "ndd.org" "work.org" "budget.org")  :fileskip0 t :link t :emphasize t))
#+RESULTS:
: both

** org-drill

#+BEGIN_SRC emacs-lisp :tangle yes
;(use-package org-drill)
#+END_SRC
** Org-refile

#+BEGIN_SRC emacs-lisp :tangle yes

  (setq org-refile-use-outline-path (quote file))

  (setq org-refile-targets '((nil :maxlevel . 2)
                             (org-agenda-files :maxlevel . 2)
                       ))

  (setq org-outline-path-complete-in-steps nil) 

; Refile in a single go

  (global-set-key (kbd "<f4>") 'org-refile)

  (setq org-refile-allow-creating-parent-nodes 'confirm)

#+END_SRC

#+RESULTS:
: confirm

** org modules

#+BEGIN_SRC emacs-lisp :tangle yes


 (setq org-modules '(org-bbdb
                      org-gnus
                      org-drill
                      org-info
                      org-jsinfo
                      org-habit
                      org-irc
                      org-mouse
                      org-protocol
                      org-annotate-file
                      org-eval
                      org-expiry
                      org-interactive-query
                      org-man
                      org-collector
                      org-panel
                      org-screen
                      org-toc))

(eval-after-load 'org '(org-load-modules-maybe t))

#+END_SRC
** Org-capture
#+BEGIN_SRC emacs-lisp :tangle yes

   (setq org-capture-templates '(("t" "todo" entry (file "~/Dropbox/Zettelkasten/inbox.org") "* TODO %? \n%a\n\n" :clock-in t :clock-resume t :prepend t)
                                 ("j" "journal" entry (file+datetree "~/Dropbox/Zettelkasten/journal.org") "** %<%H:%M> \n\n%?\n\n" :kill-buffer nil :clock-in t :clock-resume t) 
                                 ("c" "calendar" entry (file "~/Dropbox/Zettelkasten/gcal.org" ) "* %?\n\n%^T\n\n:PROPERTIES:\n\n:link: %a\n:location:%^{location}\n\n\n:END:\n\n")

                                 ("e" "expense" table-line (file+headline "~/Dropbox/Zettelkasten/budget.org" "Expenses to be filed") "|%t|%^{amount}|%a|%^{category|LIS|Food|Transportation|Clothing}|%?|" :append t :kill-buffer nil)
                                 ))




#+END_SRC

#+RESULTS:
| t | todo | entry | (file ~/Dropbox/Zettelkasten/inbox.org) | **** TODO %? |

       ;("l" "logging" entry (file+datetree "~/Dropbox/Zettelkasten/journal.org" :kill-buffer nil)
                                           ;"** %? %T" :kill-buffer nil) 
                                           ;  ("j" "jobs" table-line (file+headline "~/Dropbox/Zettelkasten/lis.org" "Jobs")
                                           ;  "|%t|%A|%^{How far?}|%^{How much?}|" :append t) 
;                                     ("r" "recommendation" table-line (file+headline "~/Dropbox/Zettelkasten/recommendations.org" "Books")
                                           ;                                     "|%t|%A||%?|" :append t :kill-buffer t)
** org-habit
#+BEGIN_SRC emacs-lisp :tangle yes
   (setq org-habit-following-days 1)

   (setq org-habit-show-habits-only-for-today t)
   (setq org-habit-preceding-days 7)
   (setq org-habit-completed-glyph 128504)
   (setq org-habit-show-done-always-green t)

#+END_SRC

#+RESULTS:
: t

** org-brain

#+BEGIN_SRC emacs-lisp :tangle yes
      (use-package org-brain :ensure t)
      (setq org-brain-path "~/Dropbox/Zettelkasten/")
   (setq org-id-track-globally t)
(setq org-id-locations-file "~/.emacs.d/.org-id-locations")
(setq org-brain-visualize-default-choices 'all)
#+END_SRC

#+RESULTS:
: all

** org-archive
 #+BEGIN_SRC emacs-lisp :tangle yes

;(setq org-archive-location "~/Dropbox/Zettelkasten/archive.org::datetree/")
(setq org-archive-location "~/Dropbox/Zettelkasten/journal.org::datetree/* Finished tasks")
   

 #+END_SRC

 #+RESULTS:
 : ~/Dropbox/Zettelkasten/journal.org::datetree/* Finished tasks

** org-mode structure templates
#+BEGIN_SRC emacs-lisp :tangle yes


(add-to-list 'org-structure-template-alist (list "eh" (concat ":EXPORT_FILE_NAME: ?\n" ":EXPORT_TITLE:\n" ":EXPORT_OPTIONS: toc:nil html-postamble:nil num:nil")))

#+END_SRC

#+RESULTS:
| eh | :EXPORT_FILE_NAME: ? |

** org-tags
#+BEGIN_SRC emacs-lisp :tangle yes

(setq org-complete-tags-always-offer-all-agenda-tags t)
;(setq org-tags-column -80)
(setq org-tags-match-list-sublevels (quote indented))
(setq tags-add-tables nil)

#+END_SRC

#+RESULTS:



* buffers
#+BEGIN_SRC emacs-lisp :tangle yes
(defun kill-other-buffers ()
    "Kill all other buffers."
    (interactive)
    (mapc 'kill-buffer 
          (delq (current-buffer) 
                (remove-if-not 'buffer-file-name (buffer-list)))))

#+END_SRC

#+RESULTS:
: kill-other-buffers

* org-emphasis-alist

#+BEGIN_SRC  emacs-lisp :tangle yes
(custom-set-variables

'(org-emphasis-alist
   (quote
    (("!"
      (quote
       (:weight bold :family "consolas" :foreground "red3" :background "slategray3"))
      verbatim)
     ("*"
      (quote
       (:weight bold :foreground "dodgerblue")))
     ("/"
      (quote
       (:slant italic :foreground "darkorchid1")))
     ("_"
      (quote
       (:underline t :foreground "orangered" :weight bold )))
     ("=" org-verbatim verbatim)
     ("~" org-code verbatim)
     ("+"
      (quote
       (:strike-through "chartreuse" :weight bold)))
     ("@"
      (quote
       (:weight bold :foreground "chartreuse")
       verbatim)))))
)

#+END_SRC

#+RESULTS:

* fonts
#+BEGIN_SRC emacs-lisp :tangle yes
  
(set-fontset-font "fontset-default" '(#x1100 . #xffdc)
                '("NanumBarunGothic" . "unicode-bmp" ))
(set-fontset-font "fontset-default" '(#xe0bc . #xf66e) 
                '("NanumBarunGothic" . "unicode-bmp"))
(set-fontset-font "fontset-default" '(#x2091 . #x21ff)     
              (font-spec :family "DejaVu Sans Mono" :size 20)) 

(setq use-default-font-for-symbols nil)

(use-package unicode-fonts
	  :ensure t
	  :disabled t
	  :init (unicode-fonts-setup))

#+END_SRC

#+RESULTS:

* Formatting
#+BEGIN_SRC emacs-lisp :tangle yes

(setq fill-column 100)
;(fill-column 100)

(global-visual-line-mode t) 
(use-package visual-fill-column
     :ensure t)

;(add-hook 'visual-line-mode-hook #'visual-fill-column-mode)
;(global-visual-fill-column-mode t)
;(setq global-visual-fill-column-mode t)
(setq visual-fill-column-center-text t)

#+END_SRC

#+RESULTS:
: t

* org fonts
#+BEGIN_SRC emacs-lisp :tangle yes

            (setq org-ellipsis " ෴ " )

            (use-package org-bullets
                     :init
                     (add-hook 'org-mode-hook 
                     (lambda () (org-bullets-mode 1)))
                     (setq org-bullets-bullet-list 
                     (quote ("◉""〉""⚬" "»" "⏵" "⊹"  "⯮" "⊸" "∞" "⛯"   ))))



             (setq org-list-demote-modify-bullet
                   '(("+" . "-") ("-" . "+") ))
         (setq org-list-allow-alphabetical t)
         (setq org-list-indent-offset 1)
         (setq org-checkbox-hierarchical-statistics t)

#+END_SRC

#+RESULTS:
: t


#+RESULTS:
| +PROJECT/-MAYBE-DONE | (NEXT) | nil | \<IGNORE\> |

* encoding
#+BEGIN_SRC emacs-lisp :tangle yes

(set-language-environment "UTF-8")
(set-default-coding-systems 'utf-8)
#+END_SRC

* custom-set-faces
#+BEGIN_SRC emacs-lisp :tangle yes

   (custom-set-faces 
    '(default ((t (:inherit nil :stipple nil :background "#242728" :foreground "bisque1" :inverse-video nil :box nil :strike-through nil :overline nil :underline nil :slant normal :weight normal :height 150 :width normal :family "Consolas"))))                    
    '(fringe ((t (:background "#242728"))))
    '(highlight ((t (:weight bold))))
    '(lazy-highlight ((t (:inherit highlight :background "black"))))
    '(link ((t (:foreground "#06d8ff" :underline t :weight normal))))
    '(helm-selection ((t (:inherit bold :background "black" :foreground "magenta" :underline t))))

    '(custom-variable-tag ((t (:inherit variable-pitch :foreground "gold" :height 1.1))))
    '(org-agenda-calendar-event ((t (:foreground "light gray"))))
    '(org-agenda-clocking ((t (:box (:line-width 2 :color "magenta" :style released-button)))))
    '(org-agenda-current-time ((t (:foreground "OliveDrab3"))))
    '(org-agenda-date ((t (:background "light steel blue" :foreground "midnight blue" :inverse-video nil :box (:line-width 20 :color "#242728") :overline nil :slant normal :weight normal :height 1.2))))


    '(mode-line ((t (:background "darkgray" :height 120 :foreground "black" :inverse-video nil :box (:line-width 1 :color "#35393b" :style unspecified)))))



    '(org-agenda-date-today ((t (:inherit org-agenda-date :background "#242728" :foreground "gold" :inverse-video t :overline nil :weight bold))))
    '(org-agenda-date-weekend ((((class color) (min-colors 257)) (:inherit org-agenda-date :inverse-video nil :background unspecified :foreground "deep pink" :weight unspecified :underline t :overline nil :box (:line-width 20 :color "#242728"))) (((class color) (min-colors 89)) (:inherit org-agenda-date :inverse-video nil :background unspecified :foreground "red" :weight unspecified :underline t :overline nil :box 1))))
    '(org-archived ((t (:foreground "saddle brown" :weight normal))))
    '(org-block ((t (:foreground "gainsboro"))))
    '(org-clock-overlay ((t (:background "dim gray"))))
    '(org-date ((t (:foreground "steel blue" :underline t))))
    '(org-default ((t (:inherit default))))
    '(org-done ((t (:foreground "dark gray" :weight normal))))
    '(org-ellipsis ((t (:foreground "#6A6D70" :height 0.5))))



    '(org-habit-alert-future-face ((t (:background "yellow" :foreground "black"))))
    '(org-habit-overdue-face ((t (:background "firebrick4" :foreground "white"))))
    '(org-habit-ready-face ((t (:background "green2" :foreground "black"))))




    '(org-inlinetask ((t (:foreground "dodger blue"))))
    '(org-level-1 ((t (:inherit nil :foreground "gray" :weight bold :height 1.5 :width extra-expanded :family "pompiere"))))
    '(org-level-2 ((t (:inherit variable-pitch :foreground "light goldenrod" :height 0.95))))
    '(org-level-3 ((t (:inherit variable-pitch :foreground "skyblue1" :height 0.95))))
    '(org-level-4 ((t (:inherit variable-pitch :foreground "darkolivegreen1" :height 0.95))))
    '(org-level-5 ((t (:inherit variable-pitch :foreground "MediumOrchid1"))))
    '(org-level-6 ((t (:inherit variable-pitch :foreground "tomato"))))
    '(org-link ((t (:foreground "LightSteelBlue3" :underline t :family "nova mono"))))

    '(org-list-dt ((t (:foreground "mediumorchid4" :weight bold :background "lavenderblush1" :underline t ))))

    '(org-priority ((t (:foreground "gold" :weight bold))))
    '(org-ref-cite-face ((t (:foreground "violet red" :underline t :family "consolas"))))
    '(org-scheduled ((t (:foreground "DarkOliveGreen3"))))
    '(org-scheduled-previously ((t (:foreground "seashell1" :weight bold))))
    '(org-scheduled-today ((t (:foreground "light goldenrod" :weight normal))))
    '(org-special-keyword ((t (:foreground "#6A6D70" :weight normal))))
    '(org-tag ((t (:foreground "chartreuse3" :slant normal :weight normal :height 130 :family "consolas"))))
    '(org-todo ((t (:background "gray13" :foreground "orange red" :box (:line-width 2 :color "#242728") :weight normal :family "fira mono"))))
    '(org-upcoming-deadline ((((class color) (min-colors 257)) (:foreground "#E6DB74" :weight normal :underline nil)) (((class color) (min-colors 89)) (:foreground "#CDC673" :weight normal :underline nil))))
    '(org-warning ((t (:foreground "goldenrod1" :underline nil :weight normal))))
    '(secondary-selection ((t (:background "gray14" :foreground "pale green"))))
    '(variable-pitch ((t (:family "happy monkey")))))


#+END_SRC

#+RESULTS:



* pdf-tools


#+BEGIN_SRC emacs-lisp :tangle yes
(pdf-tools-install)

(eval-after-load 'org '(require 'org-pdfview))

(use-package pdf-tools)
(use-package org-pdfview)

(add-to-list 'org-file-apps '("\\.pdf\\'" . org-pdfview-open))
(add-to-list 'org-file-apps '("\\.pdf::\\([[:digit:]]+\\)\\'" .  org-pdfview-open))


(add-to-list 'org-file-apps 
             '("\\.pdf\\'" . (lambda (file link)
                                     (org-pdfview-open link))))
#+END_SRC

#+RESULTS:
: ((\.pdf\' lambda (file link) (org-pdfview-open link)) (\.pdf::\([[:digit:]]+\)\' . org-pdfview-open) (\.pdf\' . org-pdfview-open) (auto-mode . emacs) (\.mm\' . default) (\.x?html?\' . default) (\.pdf\' . default))




* Web

#+BEGIN_SRC emacs-lisp :tangle yes

(defun my-set-eww-buffer-title ()
      (let* ((title (plist-get eww-data :title))
      (url   (plist-get eww-data :url))
      (result (concat "*eww-" 
               (or title Norton Guide reader     
		 (if (string-match "://" url)
                   (substring url (match-beginning 0))
                   url)) "*")))
       (rename-buffer result t)))

(add-hook 'eww-after-render-hook 'my-set-eww-buffer-title)


(defun shr-html2text ()
  "Replacement for standard html2text using shr."
  (interactive)
  (let ((dom (libxml-parse-html-region (point-min) (point-max)))
        (shr-width fill-column)
        (shr-inhibit-images t)
        (shr-bullet " "))
        (erase-buffer)
        (shr-insert-document dom)
        (goto-char (point-min))))

(eval-after-load 'shr  
     '(progn (setq shr-width -1)  
             (defun shr-fill-text (text) text)  
             (defun shr-fill-lines (start end) nil)  
             (defun shr-fill-line () nil)))

#+END_SRC

#+RESULTS:

* mu4e

#+BEGIN_SRC emacs-lisp :tangle yes
         (add-to-list 'load-path "/usr/local/share/emacs/site-lisp/mu4e") 
        ; (use-package mu4e) 
        ; (use-package mu4e-contrib)
      (require 'mu4e)
      (require 'org-mu4e)
         ;; don't save message to Sent Messages, Gmail/IMAP takes care of this
         (setq mu4e-sent-messages-behavior 'delete)
         (setq message-kill-buffer-on-exit t)
         (setq mu4e-change-filenames-when-moving t)
         (setq mu4e-compose-format-flowed t)
         (setq smtpmail-default-smtp-server "smtp.gmail.com")
      (add-hook 'mu4e-view-mode-hook 'visual-fill-column-mode)

   (add-hook 'message-mode-hook 'visual-fill-column-mode)
       ;  (add-hook 'mu4e-headers-mode-hook (lambda ()(set-fill-column 200)))
 #+END_SRC

 #+RESULTS:
 | visual-fill-column-mode |

** message view

#+BEGIN_SRC emacs-lisp :tangle yes
(setq mu4e-attachment-dir "~/Downloads/")

(setq shr-color-visible-luminance-min 50) 
(setq shr-color-visible-distance-min 5)
;(setq mu4e-view-html-plaintext-ratio-heuristic 'most-positive-fixnum)
(setq message-yank-prefix ""
      message-yank-empty-prefix ""
      message-yank-cited-prefix "")

;; customize the reply-quote-string
(setq message-citation-line-format "\n\nOn %a %d %b %Y at %R, %f wrote:\n")
;; choose to use the formatted string
(setq message-citation-line-function 'message-insert-formatted-citation-line)


(setq mu4e-view-scroll-to-next nil)


#+END_SRC

#+RESULTS:

** headers view

#+BEGIN_SRC emacs-lisp :tangle yes
   (setq org-mu4e-link-query-in-headers-mode nil)
   ;(setq mu4e-update-interval 60)
   ;(setq mu4e-index-update-in-background t)
   (setq mu4e-headers-fields
         '( (:human-date    .  13)    ;; alternatively, use :human-date
            (:flags         .   6)
            (:from          .  22)
;            (:thread-subject       . 90 )
            (:thread-subject       . 70 )

            )) 
   ;; alternatively, use :thre
      ;; ;;  ;; ad-subject
   (setq mu4e-view-prefer-html t)
   (setq mu4e-headers-skip-duplicates t)
   (setq mu4e-headers-auto-update t)
   (setq mu4e-view-show-addresses t)
   (setq mu4e-headers-date-format "%x")
   (setq mu4e-headers-time-format "%H:%M")
#+END_SRC

#+RESULTS:
: %H:%M

** settings

#+BEGIN_SRC emacs-lisp :tangle yes

  ;; allow for updating mail using 'U' in the main view:
(setq mu4e-get-mail-command "true")

#+END_SRC 

** folders

#+BEGIN_SRC emacs-lisp :tangle yes

(setq mu4e-maildir-shortcuts
  '( ("/INBOX"  . ?i)
	 ("/Sent"   . ?s)
	 ("/Trash"  . ?t)
	 ("/All"    . ?a)))

(setq mu4e-drafts-folder "/Drafts")
(setq mu4e-sent-folder   "/Sent")
(setq mu4e-trash-folder  "/Trash")
(setq mu4e-refile-folder "/All")
(setq mu4e-maildir "~/Maildir")
;(setq mu4e-attachment-dir "~/Dropbox/Downloads")
#+END_SRC 

#+RESULTS:
: ~/Maildir

** bbdb

#+BEGIN_SRC emacs-lisp :tangle yes
 	
(use-package bbdb)

(bbdb-initialize)
(autoload 'bbdb-insinuate-mu4e "bbdb-mu4e")
(bbdb-initialize 'message 'mu4e)

(setq bbdb-mail-user-agent 'mu4e-user-agent)
;(setq mu4e-view-mode-hook 'bbdb-mua-auto-update visual-line-mode)
(setq mu4e-compose-complete-addresses t)
(setq bbdb-mua-pop-up t)
(setq bbdb-mua-pop-up-window-size 5)
(setq mu4e-view-show-addresses t)  
(setq bbdb-default-country "United States")



#+END_SRC

#+RESULTS:
: United States


* Troubleshooting
#+BEGIN_SRC emacs-lisp :tangle yes

(setq debug-on-error nil)



#+END_SRC

#+RESULTS:

* Testing pond

#+BEGIN_SRC emacs-lisp :tangle yes
(setq org-edit-src-content-indentation 3)

(setq initial-major-mode 'org-mode)

; (require 'org-trello)
;makes scratch buffer an org buffer



;adding config stuff. 




(custom-set-variables
 '(annotate-annotation-column 100)
 '(bibtex-autokey-name-separator "_")
 '(bibtex-autokey-name-year-separator "_")
 '(bibtex-autokey-titleword-separator "-")
 '(bibtex-autokey-year-length 4)
 '(bibtex-autokey-year-title-separator "_")


 '(org-agenda-persistent-filter t)
; '(org-agenda-start-with-entry-text-mode t)
; '(org-agenda-time-grid
 ;  (quote
  ;  ((daily today require-timed remove-match)
   ;  (800 1000 1200 1400 1600 1800 2000)
    ; "......" "----------------")))
 '(org-bbdb-anniversary-field (quote birthday) nil (bbdb))
 '(org-catch-invisible-edits (quote smart))
 

 '(org-datetree-add-timestamp (quote inactive))
 '(org-default-notes-file "~/Dropbox/Zettelkasten/inbox.org")
'(org-ellipsis " ෴ ")




;'(org-trello-current-prefix-keybinding "C-c o" nil (org-trello))
 ;'(pdf-view-continuous nil)
)


#+END_SRC

#+RESULTS:

* Archived
- mobile org [2017-10-19 Thu]
- habitica [2017-10-19 Thu]

* FRAME/startup
#+BEGIN_SRC emacs-lisp :tangle yes
(setq frame-title-format (list (format "%s %%S: %%j " (system-name))
                              '(buffer-file-name "%f" (dired-directory dired-directory "%b"))))
;(setq initial-buffer-choice 'deft)
(find-file "~/Dropbox/emacs/settings.org")
(add-to-list 'default-frame-alist '(fullscreen . maximized))
(setq inhibit-startup-screen t)
(setq split-height-threshold nil)
(setq split-width-threshold 0)
(tool-bar-mode -1)
#+END_SRC

#+RESULTS:

* file encoding
C-h C RET
M-x describe-current-coding-system

#+BEGIN_SRC  emacs-lisp :tangle yes

(add-to-list 'file-coding-system-alist '("\\.tex" . utf-8-unix) )
(add-to-list 'file-coding-system-alist '("\\.txt" . utf-8-unix) )
(add-to-list 'file-coding-system-alist '("\\.el" . utf-8-unix) )
(add-to-list 'file-coding-system-alist '("\\.scratch" . utf-8-unix) )
(add-to-list 'file-coding-system-alist '("user_prefs" . utf-8-unix) )

(add-to-list 'process-coding-system-alist '("\\.txt" . utf-8-unix) )

(add-to-list 'network-coding-system-alist '("\\.txt" . utf-8-unix) )

(prefer-coding-system 'utf-8-unix)
(set-default-coding-systems 'utf-8-unix)
(set-terminal-coding-system 'utf-8-unix)
(set-keyboard-coding-system 'utf-8-unix)
(set-selection-coding-system 'utf-8-unix)
(setq-default buffer-file-coding-system 'utf-8-unix)

;; Treat clipboard input as UTF-8 string first; compound text next, etc.
(setq x-select-request-type '(UTF8_STRING COMPOUND_TEXT TEXT STRING))

;; mnemonic for utf-8 is "U", which is defined in the mule.el
(setq eol-mnemonic-dos ":CRLF")
(setq eol-mnemonic-mac ":CR")
(setq eol-mnemonic-undecided ":?")
(setq eol-mnemonic-unix ":LF")

(defalias 'read-buffer-file-coding-system 'lawlist-read-buffer-file-coding-system)
(defun lawlist-read-buffer-file-coding-system ()
  (let* ((bcss (find-coding-systems-region (point-min) (point-max)))
         (css-table
          (unless (equal bcss '(undecided))
            (append '("dos" "unix" "mac")
                    (delq nil (mapcar (lambda (cs)
                                        (if (memq (coding-system-base cs) bcss)
                                            (symbol-name cs)))
                                      coding-system-list)))))
         (combined-table
          (if css-table
              (completion-table-in-turn css-table coding-system-alist)
            coding-system-alist))
         (auto-cs
          (unless find-file-literally
            (save-excursion
              (save-restriction
                (widen)
                (goto-char (point-min))
                (funcall set-auto-coding-function
                         (or buffer-file-name "") (buffer-size))))))
         (preferred 'utf-8-unix)
         (default 'utf-8-unix)
         (completion-ignore-case t)
         (completion-pcm--delim-wild-regex ; Let "u8" complete to "utf-8".
          (concat completion-pcm--delim-wild-regex
                  "\\|\\([[:alpha:]]\\)[[:digit:]]"))
         (cs (completing-read
              (format "Coding system for saving file (default %s): " default)
              combined-table
              nil t nil 'coding-system-history
              (if default (symbol-name default)))))
    (unless (zerop (length cs)) (intern cs))))

#+END_SRC

#+RESULTS:
: lawlist-read-buffer-file-coding-system

* Saving files | MAGIT
(setq auto-revert-interval 50400)
#+BEGIN_SRC emacs-lisp :tangle yes

   (global-auto-revert-mode t)
   (setq auto-revert-interval 5)
   (setq backup-directory-alist '(("." . "~/.emacs.d/backups")))
   (setq delete-old-versions -1)
   (setq version-control t)
   (setq vc-make-backup-files t)
   (setq auto-save-file-name-transforms '((".*" "~/.emacs.d/auto-save-list/" t)))
   (setq auto-save-interval 5)
   (setq auto-save-visited-file-name nil)
   (use-package magit
     :ensure t
     :init (progn
             (setq magit-repository-directories '("~/Dropbox/emacs/" "~/Dropbox/Zettelkasten/"))))

#+END_SRC

#+RESULTS:
| ~/Dropbox/emacs/ | ~/Dropbox/Zettelkasten/ |


* sounds
 #+BEGIN_SRC emacs-lisp :tangle yes
  (setq visible-bell nil)
 #+END_SRC

 #+RESULTS:







